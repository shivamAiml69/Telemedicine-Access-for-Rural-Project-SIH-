<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Telemedicine Nabha â€” Login & Register</title>
  
  <!-- Poppins font + Font Awesome -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <style>
    *{margin:0;padding:0;box-sizing:border-box;font-family:'Poppins',sans-serif}
    body{
      min-height:100vh;display:flex;align-items:center;justify-content:center;
      background: linear-gradient(135deg, #e3f2fd, #cfe8ff);
      padding: 20px;
    }

    /* === Container === */
    .auth{
      position:relative;width:900px;height:560px;background:#fff;border-radius:16px;overflow:hidden;
      box-shadow:0 20px 60px rgba(0,0,0,.12)
    }

    /* Flash messages container */
    .flash-container {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      z-index: 10;
      padding: 10px 20px;
    }

    /* === Forms side (left half by default) === */
    .forms-container{
      position:absolute;top:0;left:0;width:50%;height:100%;
      transition:transform .6s ease-in-out;z-index:2;display:flex;align-items:center;justify-content:center
    }
    
    .form{
      position:absolute;width:78%;max-width:360px;text-align:left;transition:opacity .4s ease-in-out
    }
    
    .form h2{
      color:#0b64e7;text-align:center;margin-bottom:18px;
      font-size: 1.8rem;
      font-weight: 700;
    }
    
    .form label{
      font-weight:500;font-size:.95rem;display:block;margin:8px 0 6px;
      color: #444;
    }
    
    .form input,.form select{
      width:100%;padding:14px;border:1px solid #ddd;border-radius:10px;margin:4px 0 16px;
      font-size:.95rem; box-sizing:border-box;
      transition: all 0.3s;
    }
    
    .form input:focus,.form select:focus{
      outline:none;border-color:#0b64e7;box-shadow:0 0 0 3px rgba(11,100,231,.12)
    }
    
    .btn{
      width:100%;padding:14px;border:none;border-radius:10px;background:#0b64e7;color:#fff;
      font-weight:600;cursor:pointer;transition:all 0.3s;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      font-size: 16px;
    }
    
    .btn:hover{
      background:#074eb4; 
      transform:translateY(-2px);
      box-shadow: 0 5px 15px rgba(11, 100, 231, 0.3);
    }
    
    .links{
      display:flex;justify-content:space-between;margin-top:12px;font-size:.85rem
    }
    
    .links a{
      color:#666;text-decoration:none;
      transition: color 0.3s;
    }
    
    .links a:hover{
      color:#0b64e7;
    }

    /* Social buttons */
    .social{
      display:flex;
      gap:12px;
      justify-content:center;
      margin-top:16px;
    }
    
    .social a{
      width:40px;
      height:40px;
      border-radius:50%;
      background:#f5f7fa;
      display:flex;
      align-items:center;
      justify-content:center;
      color:#555;
      text-decoration:none;
      transition:all 0.3s;
    }
    
    .social a:hover{
      background:#0b64e7;
      color:#fff;
      transform: translateY(-2px);
    }

    /* Show only one form at a time */
    .login-form{z-index:3;opacity:1}
    .register-form{z-index:2;opacity:0}
    .auth.right-panel-active .login-form{opacity:0;z-index:2}
    .auth.right-panel-active .register-form{opacity:1;z-index:3}

    /* Move forms block to the right half when register is active */
    .auth.right-panel-active .forms-container{transform:translateX(100%)}

    /* === Overlay (right half by default) === */
    .overlay-container{
      position:absolute;top:0;left:50%;width:50%;height:100%;overflow:hidden;transition:transform .6s ease-in-out;z-index:5
    }
    
    .overlay{
      background:linear-gradient(135deg,#0b64e7,#4e54c8);
      color:#fff;position:relative;left:-100%;width:200%;height:100%;
      transform:translateX(0);transition:transform .6s ease-in-out
    }
    
    .overlay-panel{
      position:absolute;display:flex;flex-direction:column;align-items:center;justify-content:center;
      text-align:center;top:0;height:100%;width:50%;padding:0 40px
    }
    
    .overlay-panel h2{
      font-weight:700;
      margin-bottom:15px;
      font-size: 1.8rem;
    }
    
    .overlay-panel p{
      opacity:.95;
      margin-bottom:22px;
      line-height: 1.5;
    }
    
    .ghost{
      background:#fff;
      color:#0b64e7;
      border:none;
      border-radius:999px;
      padding:12px 30px;
      font-weight:600;
      cursor:pointer;
      transition:all 0.3s;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .ghost:hover{
      background:#e8f0fe;
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(255, 255, 255, 0.2);
    }

    .overlay-left{transform:translateX(-20px);left:0}
    .overlay-right{right:0}

    /* Slide overlay to the left when register is active */
    .auth.right-panel-active .overlay-container{transform:translateX(-100%)}
    .auth.right-panel-active .overlay{transform:translateX(50%)}

    /* Responsive */
    @media (max-width:940px){
      .auth{width:95vw;height:95vh}
    }
    
    @media (max-width:720px){
      .forms-container,.overlay-container{width:100%}
      .overlay{display:none}
      .auth.right-panel-active .forms-container{transform:none}
      .register-form,.login-form{position:relative}
      
      .links {
        flex-direction: column;
        align-items: center;
        gap: 10px;
      }
    }
  </style>
</head>
<body>

<div class="auth" id="authBox">
  <!-- Flash Messages - Moved outside forms container -->
  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      <div class="flash-container">
        {% for category, message in messages %}
          <div class="alert alert-{{ category }}"
               data-category="{{ category }}"
               style="padding:12px; border-radius:8px; margin-bottom:12px;
                      {% if category == 'success' %} background:#d4edda; color:#155724; border:1px solid #c3e6cb;
                      {% elif category == 'warning' %} background:#fff3cd; color:#856404; border:1px solid #ffeaa7;
                      {% elif category == 'danger' %} background:#f8d7da; color:#721c24; border:1px solid #f5c6cb;
                      {% elif category == 'info' %} background:#cce5ff; color:#004085; border:1px solid #b8daff;
                      {% endif %}">
            <i class="fas 
              {% if category == 'success' %} fa-check-circle
              {% elif category == 'warning' %} fa-exclamation-triangle
              {% elif category == 'danger' %} fa-exclamation-circle
              {% elif category == 'info' %} fa-info-circle
              {% endif %}" 
              style="margin-right: 8px;"></i>
            {{ message }}
          </div>
        {% endfor %}
      </div>
    {% endif %}
  {% endwith %}

  <!-- Forms -->
  <div class="forms-container">
    <!-- Login -->
    <form class="form login-form" method="POST" action="{{ url_for('login') }}">
      <h2><i class="fas fa-sign-in-alt"></i> Login</h2>

      <label for="login-email">Email</label>
      <input id="login-email" type="email" name="email" placeholder="Enter your email" required>

      <label for="login-password">Password</label>
      <input id="login-password" type="password" name="password" placeholder="Enter your password" required>

      <button type="submit" class="btn"><i class="fas fa-lock"></i> Login</button>

      <div class="links">
        <a href="#">Forgot password?</a>
        <a href="#" id="goRegisterLink">Create account</a>
      </div>

      <div class="social">
        <a href="#"><i class="fab fa-google"></i></a>
        <a href="#"><i class="fab fa-facebook-f"></i></a>
        <a href="#"><i class="fab fa-twitter"></i></a>
        <a href="#"><i class="fab fa-linkedin-in"></i></a>
      </div>
    </form>

    <!-- Register -->
    <form class="form register-form" method="POST" action="{{ url_for('register') }}">
      <h2><i class="fas fa-user-plus"></i> Create Account</h2>

      <label for="reg-name">Full Name</label>
      <input id="reg-name" type="text" name="name" placeholder="Enter your full name" required>

      <label for="reg-email">Email</label>
      <input id="reg-email" type="email" name="email" placeholder="Enter your email" required>

      <label for="reg-password">Password</label>
      <input id="reg-password" type="password" name="password" placeholder="Create a strong password" required>

      <label for="roleSelect">I am a</label>
      <select id="roleSelect" name="role" required>
        <option value="patient">Patient</option>
        <option value="doctor">Doctor</option>
      </select>

      <!-- Specialization field (hidden unless Doctor is chosen) -->
      <div id="specializationField" style="display:none; margin-top:6px;">
        <label for="specialization">Specialization</label>
        <select id="specialization" name="specialization">
          <option value="General Medicine">General Medicine</option>
          <option value="Pediatrics">Pediatrics</option>
          <option value="Dermatology">Dermatology</option>
          <option value="Cardiology">Cardiology</option>
          <option value="Gynecology">Gynecology</option>
          <option value="Orthopedics">Orthopedics</option>
        </select>
      </div>

      <button type="submit" class="btn"><i class="fas fa-user-md"></i> Register</button>

      <div class="links" style="justify-content:center;margin-top:12px">
        <a href="#" id="goLoginLink">Already have an account? Login</a>
      </div>

      <div class="social" style="margin-top:16px">
        <a href="#"><i class="fab fa-google"></i></a>
        <a href="#"><i class="fab fa-facebook-f"></i></a>
        <a href="#"><i class="fab fa-twitter"></i></a>
        <a href="#"><i class="fab fa-linkedin-in"></i></a>
      </div>
    </form>
  </div>

  <!-- Overlay -->
  <div class="overlay-container">
    <div class="overlay">
      <div class="overlay-panel overlay-left">
        <h2>Welcome Back!</h2>
        <p>Login to access telemedicine services, book appointments, and connect with healthcare providers across Nabha's villages.</p>
        <button class="ghost" id="showLogin"><i class="fas fa-sign-in-alt"></i> Login</button>
      </div>
      <div class="overlay-panel overlay-right">
        <h2>Join Telemedicine Nabha</h2>
        <p>Register now to bring quality healthcare to rural communities through our telemedicine platform serving villages around Nabha.</p>
        <button class="ghost" id="showRegister"><i class="fas fa-user-plus"></i> Create Account</button>
      </div>
    </div>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const box = document.getElementById('authBox');

    // overlay buttons
    const showRegisterBtn = document.getElementById('showRegister');
    const showLoginBtn = document.getElementById('showLogin');

    if (showRegisterBtn) showRegisterBtn.addEventListener('click', () => box.classList.add('right-panel-active'));
    if (showLoginBtn) showLoginBtn.addEventListener('click', () => box.classList.remove('right-panel-active'));

    // convenience links under forms (toggle using class)
    const goRegisterLink = document.getElementById('goRegisterLink');
    const goLoginLink = document.getElementById('goLoginLink');

    if (goRegisterLink) goRegisterLink.addEventListener('click', (e) => { 
      e.preventDefault(); 
      box.classList.add('right-panel-active'); 
    });
    
    if (goLoginLink) goLoginLink.addEventListener('click', (e) => { 
      e.preventDefault(); 
      box.classList.remove('right-panel-active'); 
    });

    // specialization toggle
    const roleSelect = document.getElementById('roleSelect');
    const specializationField = document.getElementById('specializationField');

    if (roleSelect && specializationField) {
      roleSelect.addEventListener('change', () => {
        if (roleSelect.value === 'doctor') {
          specializationField.style.display = 'block';
        } else {
          specializationField.style.display = 'none';
        }
      });
      
      // set initial visibility based on current value (in case of server rendering)
      specializationField.style.display = (roleSelect.value === 'doctor') ? 'block' : 'none';
    }
  });
</script>

</body>
</html>